<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOCKS5 代理转发客户端</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 8px;
        }
        .section h2 {
            color: #555;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
            margin-top: 0;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #666;
        }
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        .btn:hover {
            background-color: #45a049;
        }
        .btn.stop {
            background-color: #f44336;
        }
        .btn.stop:hover {
            background-color: #da190b;
        }
        .btn.secondary {
            background-color: #2196F3;
        }
        .btn.secondary:hover {
            background-color: #0b7dda;
        }
        .btn.warning {
            background-color: #ff9800;
        }
        .btn.warning:hover {
            background-color: #e68a00;
        }
        .forward-rules, .servers-list {
            margin-top: 20px;
        }
        .rule, .server {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 10px;
            border: 1px solid #eee;
        }
        .rule-header, .server-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .rule-id, .server-name {
            font-weight: bold;
            color: #333;
        }
        .status {
            padding: 5px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }
        .status.running {
            background-color: #4CAF50;
            color: white;
        }
        .status.stopped {
            background-color: #f44336;
            color: white;
        }
        .status.selected {
            background-color: #2196F3;
            color: white;
        }
        .status.enabled {
            background-color: #4CAF50;
            color: white;
        }
        .status.disabled {
            background-color: #9e9e9e;
            color: white;
        }
        .rule-info, .server-info {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }
        .rule-actions, .server-actions {
            margin-top: 10px;
        }
        .tab-container {
            margin-bottom: 20px;
        }
        .tabs {
            display: flex;
            background-color: #f1f1f1;
            border-radius: 4px;
            overflow: hidden;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: none;
            background-color: transparent;
            font-size: 16px;
            outline: none;
            transition: background-color 0.3s;
        }
        .tab.active {
            background-color: #4CAF50;
            color: white;
        }
        .tab:hover {
            background-color: #ddd;
        }
        .tab.active:hover {
            background-color: #45a049;
        }
        .tab-content {
            display: none;
            padding: 20px 0;
        }
        .tab-content.active {
            display: block;
        }
        .delay {
            color: #ff9800;
            font-weight: bold;
        }
        .logs-container {
            margin-top: 20px;
        }
        .logs {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            height: 300px;
            overflow-y: scroll;
            font-family: monospace;
            font-size: 12px;
            line-height: 1.5;
        }
        .log-line {
            margin-bottom: 5px;
        }
        .log-debug {
            color: #9e9e9e;
        }
        .log-info {
            color: #2196F3;
        }
        .log-warn {
            color: #ff9800;
        }
        .log-error {
            color: #f44336;
        }
        .log-fatal {
            color: #d32f2f;
            font-weight: bold;
        }
        .status-bar {
            background-color: #f1f1f1;
            padding: 10px;
            border-radius: 4px;
            margin-top: 20px;
            font-size: 14px;
            color: #666;
        }
        .status-item {
            margin-right: 20px;
        }
        .auto-proxy-status {
            display: inline-block;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SOCKS5 代理转发客户端</h1>

        <!-- 标签页 -->
        <div class="tab-container">
            <div class="tabs">
                <button class="tab active" onclick="openTab(event, 'servers')">服务器管理</button>
                <button class="tab" onclick="openTab(event, 'autoproxy')">自动代理</button>
                <button class="tab" onclick="openTab(event, 'forward')">转发规则</button>
                <button class="tab" onclick="openTab(event, 'logs')">日志查看</button>
            </div>

            <!-- 服务器管理标签页 -->
            <div id="servers" class="tab-content active">
                <!-- 订阅管理 -->
                <div class="section">
                    <h2>订阅管理</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="subscriptionURL">订阅URL</label>
                            <input type="text" id="subscriptionURL" placeholder="https://example.com/subscription">
                        </div>
                        <div class="form-group" style="display: flex; align-items: flex-end; gap: 10px;">
                            <button class="btn" onclick="fetchSubscription()">获取订阅</button>
                            <button class="btn secondary" onclick="updateSubscription()">更新订阅</button>
                        </div>
                    </div>
                </div>

                <!-- 服务器列表 -->
                <div class="section">
                    <h2>服务器列表</h2>
                    <div style="margin-bottom: 15px;">
                        <button class="btn secondary" onclick="testAllServers()">一键测试所有服务器</button>
                    </div>
                    <div class="servers-list" id="serversList">
                        <!-- 服务器列表将通过JavaScript动态生成 -->
                    </div>
                </div>
            </div>

            <!-- 自动代理标签页 -->
            <div id="autoproxy" class="tab-content">
                <div class="section">
                    <h2>自动代理设置</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="autoProxyPort">监听端口</label>
                            <input type="number" id="autoProxyPort" placeholder="1080" value="1080" min="1" max="65535">
                        </div>
                        <div class="form-group" style="display: flex; align-items: flex-end; gap: 10px;">
                            <button id="autoProxyStartBtn" class="btn" onclick="startAutoProxy()">启动自动代理</button>
                            <button id="autoProxyStopBtn" class="btn stop" onclick="stopAutoProxy()" style="display: none;">停止自动代理</button>
                        </div>
                    </div>
                    <div class="status-bar">
                        <span>自动代理状态: </span>
                        <span id="autoProxyStatus" class="status stopped">已停止</span>
                        <span id="autoProxyPortInfo" class="status-item" style="display: none;"> | 监听端口: <span id="listeningPort"></span></span>
                    </div>
                </div>
            </div>

            <!-- 转发规则标签页 -->
            <div id="forward" class="tab-content">
                <!-- 代理服务器配置 -->
                <div class="section">
                    <h2>代理服务器配置</h2>
                    <div class="form-group">
                        <label for="proxyAddr">代理地址</label>
                        <input type="text" id="proxyAddr" placeholder="127.0.0.1:1080" value="127.0.0.1:1080">
                    </div>
                    <div class="form-group">
                        <label for="username">用户名 (可选)</label>
                        <input type="text" id="username" placeholder="用户名">
                    </div>
                    <div class="form-group">
                        <label for="password">密码 (可选)</label>
                        <input type="password" id="password" placeholder="密码">
                    </div>
                    <button class="btn" onclick="saveConfig()">保存配置</button>
                </div>

                <!-- 转发规则 -->
                <div class="section">
                    <h2>转发规则</h2>
                    <div class="forward-rules" id="forwardRules">
                        <!-- 转发规则将通过JavaScript动态生成 -->
                    </div>
                    <button class="btn" onclick="addForwardRule()">添加转发规则</button>
                </div>
            </div>

            <!-- 日志查看标签页 -->
            <div id="logs" class="tab-content">
                <div class="section">
                    <h2>日志查看</h2>
                    <div class="logs-container">
                        <div style="margin-bottom: 10px;">
                            <button class="btn" onclick="loadLogs()">刷新日志</button>
                            <button class="btn secondary" onclick="clearLogs()">清空日志</button>
                            <span style="margin-left: 20px;">显示行数: </span>
                            <select id="logLines" onchange="loadLogs()">
                                <option value="50">50行</option>
                                <option value="100" selected>100行</option>
                                <option value="200">200行</option>
                                <option value="500">500行</option>
                                <option value="1000">1000行</option>
                            </select>
                        </div>
                        <div class="logs" id="logsContent">
                            <!-- 日志内容将通过JavaScript动态生成 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 应用状态
        let config = {
            proxyAddr: "127.0.0.1:1080",
            username: "",
            password: "",
            forwardRules: [
                {
                    id: "default-tcp",
                    enabled: true,
                    protocol: "tcp",
                    localAddr: "127.0.0.1:8080",
                    remoteAddr: "example.com:80"
                }
            ],
            subscriptionURL: "",
            servers: [],
            autoProxyEnabled: false,
            autoProxyPort: 1080
        };

        // 初始化应用
        function init() {
            loadConfig();
            renderForwardRules();
            renderServers();
            loadAutoProxyStatus();
            loadLogs();
        }

        // 打开标签页
        function openTab(evt, tabName) {
            // 隐藏所有标签内容
            let tabContents = document.getElementsByClassName("tab-content");
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove("active");
            }

            // 移除所有标签的活跃状态
            let tabs = document.getElementsByClassName("tab");
            for (let i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove("active");
            }

            // 显示当前标签内容并添加活跃状态
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");

            // 如果切换到日志标签，刷新日志
            if (tabName === "logs") {
                loadLogs();
            }
        }

        // 加载配置
        function loadConfig() {
            fetch('/api/config')
                .then(response => response.json())
                .then(data => {
                    config = data;
                    document.getElementById('proxyAddr').value = config.proxyAddr;
                    document.getElementById('username').value = config.username || '';
                    document.getElementById('password').value = config.password || '';
                    document.getElementById('subscriptionURL').value = config.subscriptionURL || '';
                    document.getElementById('autoProxyPort').value = config.autoProxyPort || 1080;
                    renderForwardRules();
                    renderServers();
                })
                .catch(error => console.error('加载配置失败:', error));
        }

        // 保存配置
        function saveConfig() {
            config.proxyAddr = document.getElementById('proxyAddr').value;
            config.username = document.getElementById('username').value;
            config.password = document.getElementById('password').value;
            config.subscriptionURL = document.getElementById('subscriptionURL').value;
            config.autoProxyPort = parseInt(document.getElementById('autoProxyPort').value);
            
            // 这里应该调用API保存配置
            console.log('保存配置:', config);
            alert('配置已保存');
        }

        // 渲染转发规则
        function renderForwardRules() {
            const container = document.getElementById('forwardRules');
            container.innerHTML = '';

            config.forwardRules.forEach(rule => {
                const ruleEl = document.createElement('div');
                ruleEl.className = 'rule';
                
                let statusClass = rule.enabled ? 'running' : 'stopped';
                let statusText = rule.enabled ? '运行中' : '已停止';
                let startStopBtn = '';
                
                if (rule.enabled) {
                    startStopBtn = '<button class="btn stop" onclick="stopForward(\'" + rule.id + "\')">停止</button>';
                } else {
                    startStopBtn = '<button class="btn" onclick="startForward(\'" + rule.id + "\')">启动</button>';
                }
                
                ruleEl.innerHTML = 
                    '<div class="rule-header">' +
                        '<span class="rule-id">' + rule.id + '</span>' +
                        '<span class="status ' + statusClass + '">' +
                            statusText +
                        '</span>' +
                    '</div>' +
                    '<div class="rule-info">' +
                        '<div>协议: ' + rule.protocol.toUpperCase() + '</div>' +
                        '<div>本地地址: ' + rule.localAddr + '</div>' +
                        '<div>远程地址: ' + rule.remoteAddr + '</div>' +
                    '</div>' +
                    '<div class="rule-actions">' +
                        startStopBtn +
                        '<button class="btn secondary" onclick="editForwardRule(\'" + rule.id + "\')">编辑</button>' +
                        '<button class="btn stop" onclick="deleteForwardRule(\'" + rule.id + "\')">删除</button>' +
                    '</div>';
                
                container.appendChild(ruleEl);
            });
        }

        // 添加转发规则
        function addForwardRule() {
            const id = 'rule-' + Date.now();
            const newRule = {
                id: id,
                enabled: false,
                protocol: 'tcp',
                localAddr: '127.0.0.1:0',
                remoteAddr: 'example.com:80'
            };
            config.forwardRules.push(newRule);
            renderForwardRules();
        }

        // 启动转发
        function startForward(ruleId) {
            console.log('启动转发:', ruleId);
            // 这里应该调用API启动转发
            const rule = config.forwardRules.find(r => r.id === ruleId);
            if (rule) {
                rule.enabled = true;
                renderForwardRules();
            }
        }

        // 停止转发
        function stopForward(ruleId) {
            console.log('停止转发:', ruleId);
            // 这里应该调用API停止转发
            const rule = config.forwardRules.find(r => r.id === ruleId);
            if (rule) {
                rule.enabled = false;
                renderForwardRules();
            }
        }

        // 编辑转发规则
        function editForwardRule(ruleId) {
            console.log('编辑转发规则:', ruleId);
            // 这里应该打开编辑对话框
        }

        // 删除转发规则
        function deleteForwardRule(ruleId) {
            console.log('删除转发规则:', ruleId);
            config.forwardRules = config.forwardRules.filter(r => r.id !== ruleId);
            renderForwardRules();
        }

        // 获取服务器列表
        function getServers() {
            fetch('/api/server/list')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        config.servers = data.servers;
                        renderServers();
                    }
                })
                .catch(error => console.error('获取服务器列表失败:', error));
        }

        // 渲染服务器列表
        function renderServers() {
            const container = document.getElementById('serversList');
            container.innerHTML = '';

            if (config.servers.length === 0) {
                container.innerHTML = '<p>暂无服务器，请先获取订阅</p>';
                return;
            }

            config.servers.forEach(server => {
                const serverEl = document.createElement('div');
                serverEl.className = 'server';
                
                let selectedClass = server.selected ? 'selected' : '';
                let selectedText = server.selected ? '已选中' : '';
                let enabledClass = server.enabled ? 'enabled' : 'disabled';
                let enabledText = server.enabled ? '已启用' : '已禁用';
                let delayText = server.delay > 0 ? server.delay + 'ms' : '未测试';
                
                let toggleBtn = '';
                if (server.enabled) {
                    toggleBtn = '<button class="btn warning" onclick="toggleServer(\'" + server.id + "\', false)">禁用</button>';
                } else {
                    toggleBtn = '<button class="btn" onclick="toggleServer(\'" + server.id + "\', true)">启用</button>';
                }
                
                let usernameText = '';
                if (server.username) {
                    usernameText = '<div>用户名: ' + server.username + '</div>';
                }
                
                serverEl.innerHTML = 
                    '<div class="server-header">' +
                        '<span class="server-name">' + (server.name || server.id) + '</span>' +
                        '<div>' +
                            '<span class="status ' + selectedClass + '">' + selectedText + '</span>' +
                            '<span class="status ' + enabledClass + '">' + enabledText + '</span>' +
                            '<span class="delay">' + delayText + '</span>' +
                        '</div>' +
                    '</div>' +
                    '<div class="server-info">' +
                        '<div>地址: ' + server.addr + ':' + server.port + '</div>' +
                        usernameText +
                    '</div>' +
                    '<div class="server-actions">' +
                        '<button class="btn" onclick="selectServer(\'" + server.id + "\')">选中</button>' +
                        '<button class="btn secondary" onclick="testServer(\'" + server.id + "\')">测试延迟</button>' +
                        toggleBtn +
                    '</div>';
                
                container.appendChild(serverEl);
            });
        }

        // 选择服务器
        function selectServer(serverId) {
            fetch('/api/server/select', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ id: serverId })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    getServers();
                    alert('服务器已选中');
                } else {
                    alert('选中服务器失败: ' + (data.message || '未知错误'));
                }
            })
            .catch(error => console.error('选中服务器失败:', error));
        }

        // 测试单个服务器延迟
        function testServer(serverId) {
            // 显示测试中状态
            const serverEl = Array.from(document.querySelectorAll('.server')).find(el => {
                return el.innerHTML.includes('selectServer(\'' + serverId + '\')');
            });
            if (serverEl) {
                const delayEl = serverEl.querySelector('.delay');
                if (delayEl) {
                    delayEl.textContent = '测试中...';
                }
            }

            fetch('/api/server/test', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ id: serverId })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    getServers();
                } else {
                    alert('测试服务器延迟失败: ' + (data.message || '未知错误'));
                }
            })
            .catch(error => {
                console.error('测试服务器延迟失败:', error);
                getServers();
            });
        }

        // 测试所有服务器延迟
        function testAllServers() {
            // 显示测试中状态
            document.querySelectorAll('.delay').forEach(el => {
                el.textContent = '测试中...';
            });

            fetch('/api/server/testall', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({})
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    getServers();
                    alert('所有服务器延迟测试完成');
                } else {
                    alert('测试所有服务器延迟失败: ' + (data.message || '未知错误'));
                }
            })
            .catch(error => {
                console.error('测试所有服务器延迟失败:', error);
                getServers();
            });
        }

        // 切换服务器启用状态
        function toggleServer(serverId, enabled) {
            // 获取服务器
            const server = config.servers.find(s => s.id === serverId);
            if (!server) return;

            // 更新服务器状态
            const updatedServer = { ...server, enabled: enabled };
            
            fetch('/api/server/update', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(updatedServer)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    getServers();
                    alert('服务器已' + (enabled ? '启用' : '禁用'));
                } else {
                    alert((enabled ? '启用' : '禁用') + '服务器失败: ' + (data.message || '未知错误'));
                }
            })
            .catch(error => console.error((enabled ? '启用' : '禁用') + '服务器失败:', error));
        }

        // 获取订阅
        function fetchSubscription() {
            const url = document.getElementById('subscriptionURL').value;
            if (!url) {
                alert('请输入订阅URL');
                return;
            }

            fetch('/api/subscription/fetch', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ url: url })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    config.servers = data.servers;
                    config.subscriptionURL = url;
                    renderServers();
                    alert('获取订阅成功，共 ' + data.servers.length + ' 个服务器');
                } else {
                    alert('获取订阅失败: ' + (data.message || '未知错误'));
                }
            })
            .catch(error => console.error('获取订阅失败:', error));
        }

        // 更新订阅
        function updateSubscription() {
            const url = document.getElementById('subscriptionURL').value || config.subscriptionURL;
            if (!url) {
                alert('请输入订阅URL');
                return;
            }

            fetch('/api/subscription/update', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ url: url })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    getServers();
                    alert('订阅已更新');
                } else {
                    alert('更新订阅失败: ' + (data.message || '未知错误'));
                }
            })
            .catch(error => console.error('更新订阅失败:', error));
        }

        // 启动自动代理
        function startAutoProxy() {
            const port = parseInt(document.getElementById('autoProxyPort').value);
            
            fetch('/api/autoproxy/start', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ port: port })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    loadAutoProxyStatus();
                    alert('自动代理已启动，监听端口: ' + data.port);
                } else {
                    alert('启动自动代理失败: ' + (data.message || '未知错误'));
                }
            })
            .catch(error => console.error('启动自动代理失败:', error));
        }

        // 停止自动代理
        function stopAutoProxy() {
            fetch('/api/autoproxy/stop', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({})
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    loadAutoProxyStatus();
                    alert('自动代理已停止');
                } else {
                    alert('停止自动代理失败: ' + (data.message || '未知错误'));
                }
            })
            .catch(error => console.error('停止自动代理失败:', error));
        }

        // 加载自动代理状态
        function loadAutoProxyStatus() {
            fetch('/api/autoproxy/status')
                .then(response => response.json())
                .then(data => {
                    const statusEl = document.getElementById('autoProxyStatus');
                    const startBtn = document.getElementById('autoProxyStartBtn');
                    const stopBtn = document.getElementById('autoProxyStopBtn');
                    const portInfoEl = document.getElementById('autoProxyPortInfo');
                    const listeningPortEl = document.getElementById('listeningPort');

                    if (data.success) {
                        let statusClass = data.status === 'running' ? 'running' : 'stopped';
                        let statusText = data.status === 'running' ? '运行中' : '已停止';
                        
                        statusEl.className = 'status ' + statusClass;
                        statusEl.textContent = statusText;
                        
                        if (data.status === 'running') {
                            startBtn.style.display = 'none';
                            stopBtn.style.display = 'inline-block';
                            portInfoEl.style.display = 'inline';
                            listeningPortEl.textContent = data.port;
                        } else {
                            startBtn.style.display = 'inline-block';
                            stopBtn.style.display = 'none';
                            portInfoEl.style.display = 'none';
                        }
                    }
                })
                .catch(error => console.error('加载自动代理状态失败:', error));
        }

        // 加载日志
        function loadLogs() {
            const lines = document.getElementById('logLines').value;
            fetch('/api/logs?lines=' + lines)
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        renderLogs(data.logs);
                    }
                })
                .catch(error => console.error('加载日志失败:', error));
        }

        // 渲染日志
        function renderLogs(logs) {
            const container = document.getElementById('logsContent');
            container.innerHTML = '';

            logs.forEach(logLine => {
                const logEl = document.createElement('div');
                logEl.className = 'log-line';
                
                // 根据日志级别添加样式
                if (logLine.includes('[DEBUG]')) {
                    logEl.className += ' log-debug';
                } else if (logLine.includes('[INFO]')) {
                    logEl.className += ' log-info';
                } else if (logLine.includes('[WARN]')) {
                    logEl.className += ' log-warn';
                } else if (logLine.includes('[ERROR]')) {
                    logEl.className += ' log-error';
                } else if (logLine.includes('[FATAL]')) {
                    logEl.className += ' log-fatal';
                }
                
                logEl.textContent = logLine;
                container.appendChild(logEl);
            });

            // 滚动到底部
            container.scrollTop = container.scrollHeight;
        }

        // 清空日志
        function clearLogs() {
            document.getElementById('logsContent').innerHTML = '';
        }

        // 页面加载完成后初始化
        window.onload = function() {
            init();
            // 定时刷新服务器列表和自动代理状态
            setInterval(getServers, 5000);
            setInterval(loadAutoProxyStatus, 2000);
        };
    </script>
</body>
</html>